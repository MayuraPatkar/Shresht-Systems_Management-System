<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/tailwind.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/shared/documentStyles.css">
    <link rel="stylesheet" href="../css/shared/cardTableStyles.css">
    <link rel="stylesheet" href="../css/reports.css">
    <title>Reports</title>
</head>

<body class="bg-gray-100">

    <!-- Fixed Header -->
    <header class="fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-30 h-24 flex items-center px-4">
        <div class="flex items-center justify-between w-full">
            <div class="flex items-center gap-3">
                <img src="../assets/icon.png" alt="Shresht Management Icon" class="h-10 w-10 object-contain">
                <h1 class="text-xl font-bold text-gray-800">Reports</h1>
            </div>
            <div class="flex items-center gap-4 flex-1 max-w-4xl mx-8">
                <!-- Report type selection will be here if needed -->
            </div>
            <div class="flex items-center gap-3">
                <button id="home-btn"
                    class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2 font-medium">
                    <i class="fas fa-home"></i>
                    Home
                </button>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar fixed top-0 left-0 bg-white h-screen flex flex-col border-r border-gray-200 pt-24 no-select">
        <nav class="flex-1 p-4 overflow-y-auto">
            <div class="flex flex-col gap-2">
                <a href="../dashboard/dashboard.html" id="dashboard"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-th-large w-8 text-center"></i>
                    <span>Dashboard</span>
                </a>
                <a href="../quotation/quotation.html" id="quotation"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-file-alt w-8 text-center"></i>
                    <span>Quotation</span>
                </a>
                <a href="../invoice/invoice.html" id="invoice"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-file-invoice-dollar w-8 text-center"></i>
                    <span>Bill / Invoice</span>
                </a>
                <a href="../waybill/wayBill.html" id="wayBill"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-route w-8 text-center"></i>
                    <span>Way Bill</span>
                </a>
                <a href="../service/service.html" id="service"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-wrench w-8 text-center"></i>
                    <span>Service</span>
                </a>
                <a href="../purchaseOrder/purchaseOrder.html" id="postOrder"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-shopping-cart w-8 text-center"></i>
                    <span>Purchase Bill</span>
                </a>
                <a href="../stock/stock.html" id="stock"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-box w-8 text-center"></i>
                    <span>Stock</span>
                </a>
                <a href="../comms/comms.html" id="comms"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-comments w-8 text-center"></i>
                    <span>Comms</span>
                </a>
                <a href="#" id="reports"
                    class="flex items-center gap-5 p-6 text-xl text-blue-600 bg-blue-50 rounded-lg font-semibold">
                    <i class="fas fa-chart-bar w-8 text-center"></i>
                    <span>Reports</span>
                </a>
                <a href="../calculations/calculations.html" id="calculations"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-calculator w-8 text-center"></i>
                    <span>Calculations</span>
                </a>
                <a href="../settings/settings.html" id="settings"
                    class="flex items-center gap-5 p-6 text-xl text-gray-600 rounded-lg hover:bg-gray-100 font-semibold">
                    <i class="fas fa-cog w-8 text-center"></i>
                    <span>Settings</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="ml-[280px] pt-24 mt-6 p-8">

        <!-- Reports Home Section -->
        <div id="reports-home">
            <!-- Page Title -->
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Generate Reports</h2>
                <p class="text-gray-600">Select a report type to generate detailed business insights</p>
            </div>

            <!-- Report Cards Grid -->
            <div class="report-cards-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">

                <!-- Stock Report Card -->
                <div class="report-card bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer"
                    data-report="stock">
                    <div class="report-card-header bg-gradient-to-r from-blue-500 to-blue-600 p-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-blue-400 bg-opacity-50 p-4 rounded-lg">
                                <i class="fa-solid fa-boxes-stacked text-white text-3xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-white">Stock Report</h3>
                                <p class="text-blue-100 text-sm">Track stock in/out movements</p>
                            </div>
                        </div>
                    </div>
                    <div class="report-card-body p-6">
                        <p class="text-gray-600 mb-4">Generate detailed reports on stock movements including additions,
                            removals, and adjustments over a specified period.</p>
                        <ul class="text-sm text-gray-500 space-y-2 mb-4">
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Item-wise
                                stock tracking</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Date range
                                filters</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Movement
                                history</li>
                        </ul>
                        <button
                            class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
                            <i class="fas fa-arrow-right"></i>
                            Generate Report
                        </button>
                    </div>
                </div>

                <!-- GST Report Card -->
                <div class="report-card bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer"
                    data-report="gst">
                    <div class="report-card-header bg-gradient-to-r from-green-500 to-green-600 p-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-green-400 bg-opacity-50 p-4 rounded-lg">
                                <i class="fa-solid fa-file-invoice-dollar text-white text-3xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-white">Invoice GST Report</h3>
                                <p class="text-green-100 text-sm">Invoice-based tax summary</p>
                            </div>
                        </div>
                    </div>
                    <div class="report-card-body p-6">
                        <p class="text-gray-600 mb-4">Generate monthly GST reports from invoices with Tax Rate-wise
                            breakdown, tax
                            calculations, and compliance-ready summaries.</p>
                        <ul class="text-sm text-gray-500 space-y-2 mb-4">
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Monthly
                                breakdown</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Tax Rate
                                wise summary</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> CGST/SGST
                                calculations</li>
                        </ul>
                        <button
                            class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center gap-2">
                            <i class="fas fa-arrow-right"></i>
                            Generate Report
                        </button>
                    </div>
                </div>

                <!-- Purchase GST Report Card -->
                <div class="report-card bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer"
                    data-report="purchaseGst">
                    <div class="report-card-header bg-gradient-to-r from-orange-500 to-amber-600 p-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-orange-400 bg-opacity-50 p-4 rounded-lg">
                                <i class="fa-solid fa-shopping-cart text-white text-3xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-white">Purchase GST Report</h3>
                                <p class="text-orange-100 text-sm">Purchase order tax summary</p>
                            </div>
                        </div>
                    </div>
                    <div class="report-card-body p-6">
                        <p class="text-gray-600 mb-4">Generate monthly GST reports from purchase orders with Tax
                            Rate-wise breakdown, tax calculations, and compliance-ready summaries.</p>
                        <ul class="text-sm text-gray-500 space-y-2 mb-4">
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Monthly
                                breakdown</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Tax Rate
                                wise summary</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i>
                                CGST/SGST calculations</li>
                        </ul>
                        <button
                            class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors flex items-center justify-center gap-2">
                            <i class="fas fa-arrow-right"></i>
                            Generate Report
                        </button>
                    </div>
                </div>

                <!-- Data Worksheet Report Card -->
                <div class="report-card bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer"
                    data-report="dataWorksheet">
                    <div class="report-card-header bg-gradient-to-r from-purple-500 to-purple-600 p-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-purple-400 bg-opacity-50 p-4 rounded-lg">
                                <i class="fa-solid fa-solar-panel text-white text-3xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-white">Data Worksheet</h3>
                                <p class="text-purple-100 text-sm">Solar installation calculator</p>
                            </div>
                        </div>
                    </div>
                    <div class="report-card-body p-6">
                        <p class="text-gray-600 mb-4">Generate comprehensive solar installation worksheets with energy
                            calculations, savings estimates, and subsidy details.</p>
                        <ul class="text-sm text-gray-500 space-y-2 mb-4">
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Solar
                                production estimates</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> PM SGY
                                subsidy comparison</li>
                            <li class="flex items-center gap-2"><i class="fas fa-check text-green-500"></i> Monthly
                                savings calculation</li>
                        </ul>
                        <button
                            class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors flex items-center justify-center gap-2">
                            <i class="fas fa-arrow-right"></i>
                            Generate Report
                        </button>
                    </div>
                </div>

            </div>

            <!-- Recent Reports Section -->
            <section class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-history text-indigo-600 text-2xl"></i>
                        <h2 class="text-xl font-semibold text-gray-800">Recent Reports</h2>
                    </div>
                    <div class="flex items-center gap-3">
                        <button id="delete-all-reports"
                            class="bg-red-100 text-red-600 px-3 py-1 rounded-lg text-sm hover:bg-red-200 flex items-center gap-2 font-medium"
                            title="Delete All Reports">
                            <i class="fas fa-trash"></i>
                            <span id="delete-all-text">Delete All</span>
                        </button>
                        <button id="refresh-reports" class="text-blue-600 hover:text-blue-700" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>

                <!-- Filter Tabs -->
                <div class="flex items-center gap-2 mb-4 border-b border-gray-200 pb-3">
                    <span class="text-sm text-gray-500 mr-2">Show:</span>
                    <button
                        class="report-filter-tab active px-3 py-1.5 rounded-lg text-sm font-medium transition-colors bg-indigo-600 text-white"
                        data-filter="all">
                        All
                    </button>
                    <button
                        class="report-filter-tab px-3 py-1.5 rounded-lg text-sm font-medium transition-colors bg-gray-100 text-gray-600 hover:bg-gray-200"
                        data-filter="stock">
                        Stock
                    </button>
                    <button
                        class="report-filter-tab px-3 py-1.5 rounded-lg text-sm font-medium transition-colors bg-gray-100 text-gray-600 hover:bg-gray-200"
                        data-filter="gst">
                        Invoice GST
                    </button>
                    <button
                        class="report-filter-tab px-3 py-1.5 rounded-lg text-sm font-medium transition-colors bg-gray-100 text-gray-600 hover:bg-gray-200"
                        data-filter="purchase_gst">
                        Purchase GST
                    </button>
                    <button
                        class="report-filter-tab px-3 py-1.5 rounded-lg text-sm font-medium transition-colors bg-gray-100 text-gray-600 hover:bg-gray-200"
                        data-filter="data_worksheet">
                        Worksheet
                    </button>
                </div>

                <div id="recent-reports" class="space-y-3">
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-file-alt text-4xl text-gray-300 mb-3"></i>
                        <p>No recent reports found</p>
                        <p class="text-sm">Generate a report to see it here</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Stock Report Section -->
        <div id="stock-report-section" class="report-section" style="display: none;">
            <div class="flex items-center gap-4 mb-6">
                <button id="back-to-reports-stock" class="bg-gray-200 text-gray-700 p-2 rounded-lg hover:bg-gray-300">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Stock Report</h2>
                    <p class="text-gray-600">View stock movements and inventory changes</p>
                </div>
            </div>

            <!-- Stock Report Filters -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-filter text-blue-600"></i>
                    Filter Options
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                        <input type="date" id="stock-start-date"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                        <input type="date" id="stock-end-date"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Movement Type</label>
                        <select id="stock-movement-type"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="all">All Movements</option>
                            <option value="in">Stock In</option>
                            <option value="out">Stock Out</option>
                            <option value="adjustment">Adjustments</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Item Name</label>
                        <input type="text" id="stock-item-filter" placeholder="Search item..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                <div class="mt-4 flex gap-3">
                    <button id="generate-stock-report"
                        class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2">
                        <i class="fas fa-search"></i>
                        Generate Report
                    </button>
                    <button id="clear-stock-filters"
                        class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 font-medium">
                        Clear Filters
                    </button>
                </div>
            </div>

            <!-- Stock Report Summary -->
            <div id="stock-report-summary" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" style="display: none;">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-arrow-down text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total Stock In</p>
                            <p class="text-2xl font-bold" id="summary-stock-in">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-arrow-up text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total Stock Out</p>
                            <p class="text-2xl font-bold" id="summary-stock-out">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-exchange-alt text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Adjustments</p>
                            <p class="text-2xl font-bold" id="summary-adjustments">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-box text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Net Change</p>
                            <p class="text-2xl font-bold" id="summary-net-change">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stock Report Table -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">Stock Movements</h3>
                    <div class="flex gap-3">
                        <button id="print-stock-report"
                            class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 font-medium flex items-center gap-2"
                            style="display: none;">
                            <i class="fas fa-print"></i>
                            Print
                        </button>
                        <button id="save-stock-pdf"
                            class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-medium flex items-center gap-2"
                            style="display: none;">
                            <i class="fas fa-file-pdf"></i>
                            Save PDF
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table id="stock-report-table" class="w-full border border-gray-300 rounded-lg">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Date</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Item Name</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Type</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Quantity</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Reference</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Notes</th>
                            </tr>
                        </thead>
                        <tbody id="stock-report-body">
                            <tr>
                                <td colspan="6" class="text-center py-8 text-gray-500">
                                    <i class="fas fa-chart-bar text-4xl text-gray-300 mb-3"></i>
                                    <p>Select filters and click "Generate Report" to view data</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- GST Report Section -->
        <div id="gst-report-section" class="report-section" style="display: none;">
            <div class="flex items-center gap-4 mb-6">
                <button id="back-to-reports-gst" class="bg-gray-200 text-gray-700 p-2 rounded-lg hover:bg-gray-300">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Monthly GST Report</h2>
                    <p class="text-gray-600">Invoice-based tax summary and breakdown</p>
                </div>
            </div>

            <!-- GST Report Filters -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-calendar-alt text-green-600"></i>
                    Select Period
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Month</label>
                        <select id="gst-month"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Year</label>
                        <select id="gst-year"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            <!-- Years will be populated dynamically -->
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button id="generate-gst-report"
                            class="w-full bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 font-medium flex items-center justify-center gap-2">
                            <i class="fas fa-search"></i>
                            Generate Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- GST Report Summary -->
            <div id="gst-report-summary" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" style="display: none;">
                <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-rupee-sign text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total Taxable Value</p>
                            <p class="text-2xl font-bold" id="summary-taxable">₹0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-percent text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total CGST</p>
                            <p class="text-2xl font-bold" id="summary-cgst">₹0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-percent text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total SGST</p>
                            <p class="text-2xl font-bold" id="summary-sgst">₹0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-calculator text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total GST</p>
                            <p class="text-2xl font-bold" id="summary-total-gst">₹0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GST Report Table -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 id="gst-breakdown-title" class="text-lg font-semibold text-gray-800">Tax Rate Wise Breakdown
                    </h3>
                    <div class="flex gap-3">
                        <button id="print-gst-report"
                            class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 font-medium flex items-center gap-2"
                            style="display: none;">
                            <i class="fas fa-print"></i>
                            Print
                        </button>
                        <button id="save-gst-pdf"
                            class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-medium flex items-center gap-2"
                            style="display: none;">
                            <i class="fas fa-file-pdf"></i>
                            Save PDF
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table id="gst-report-table" class="w-full border border-gray-300 rounded-lg">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Tax Rate</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Description</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Taxable Value</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    CGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    SGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Total Tax</th>
                            </tr>
                        </thead>
                        <tbody id="gst-report-body">
                            <tr>
                                <td colspan="6" class="text-center py-8 text-gray-500">
                                    <i class="fas fa-chart-pie text-4xl text-gray-300 mb-3"></i>
                                    <p>Select month and year, then click "Generate Report" to view data</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Invoice Details -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mt-6" id="gst-invoice-details"
                style="display: none;">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Invoice Details</h3>
                <div class="overflow-x-auto">
                    <table id="gst-invoice-table" class="w-full border border-gray-300 rounded-lg">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Invoice No.</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Date</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Customer</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Taxable Value</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    CGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    SGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Total</th>
                            </tr>
                        </thead>
                        <tbody id="gst-invoice-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Purchase GST Report Section -->
        <div id="purchase-gst-report-section" class="report-section" style="display: none;">
            <div class="flex items-center gap-4 mb-6">
                <button id="back-to-reports-purchase-gst"
                    class="bg-gray-200 text-gray-700 p-2 rounded-lg hover:bg-gray-300">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Monthly Purchase GST Report</h2>
                    <p class="text-gray-600">Purchase order tax summary and breakdown</p>
                </div>
            </div>

            <!-- Purchase GST Report Filters -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-calendar-alt text-orange-600"></i>
                    Select Period
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Month</label>
                        <select id="purchase-gst-month"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Year</label>
                        <select id="purchase-gst-year"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            <!-- Years will be populated dynamically -->
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button id="generate-purchase-gst-report"
                            class="w-full bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 font-medium flex items-center justify-center gap-2">
                            <i class="fas fa-search"></i>
                            Generate Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- Purchase GST Report Summary -->
            <div id="purchase-gst-report-summary" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"
                style="display: none;">
                <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-rupee-sign text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total Taxable Value</p>
                            <p class="text-2xl font-bold" id="purchase-summary-taxable">₹0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-percent text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total CGST</p>
                            <p class="text-2xl font-bold" id="purchase-summary-cgst">₹0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-percent text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total SGST</p>
                            <p class="text-2xl font-bold" id="purchase-summary-sgst">₹0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-calculator text-2xl"></i>
                        <div>
                            <p class="text-sm opacity-80">Total GST</p>
                            <p class="text-2xl font-bold" id="purchase-summary-total-gst">₹0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Purchase GST Report Table -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">Tax Rate Wise Breakdown</h3>
                    <div class="flex gap-3">
                        <button id="print-purchase-gst-report"
                            class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 font-medium flex items-center gap-2"
                            style="display: none;">
                            <i class="fas fa-print"></i>
                            Print
                        </button>
                        <button id="save-purchase-gst-pdf"
                            class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-medium flex items-center gap-2"
                            style="display: none;">
                            <i class="fas fa-file-pdf"></i>
                            Save PDF
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table id="purchase-gst-report-table" class="w-full border border-gray-300 rounded-lg">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Tax Rate</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Description</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Taxable Value</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    CGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    SGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Total Tax</th>
                            </tr>
                        </thead>
                        <tbody id="purchase-gst-report-body">
                            <tr>
                                <td colspan="6" class="text-center py-8 text-gray-500">
                                    <i class="fas fa-shopping-cart text-4xl text-gray-300 mb-3"></i>
                                    <p>Select month and year, then click "Generate Report" to view data</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Purchase Order Details -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mt-6" id="purchase-gst-details"
                style="display: none;">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Purchase Order Details</h3>
                <div class="overflow-x-auto">
                    <table id="purchase-gst-details-table" class="w-full border border-gray-300 rounded-lg">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    PO No.</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Date</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Supplier</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Taxable Value</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    CGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    SGST</th>
                                <th
                                    class="px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b">
                                    Total</th>
                            </tr>
                        </thead>
                        <tbody id="purchase-gst-details-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Data Worksheet Section -->
        <div id="data-worksheet-section" class="report-section" style="display: none;">
            <div class="flex items-center gap-4 mb-6">
                <button id="back-to-reports-worksheet"
                    class="bg-gray-200 text-gray-700 p-2 rounded-lg hover:bg-gray-300">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Data Worksheet</h2>
                    <p class="text-gray-600">Solar installation calculator and analysis</p>
                </div>
            </div>

            <!-- Data Worksheet Form -->
            <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6">
                <form id="dataWorksheetForm" class="space-y-6">

                    <!-- Basic Information -->
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-info-circle text-blue-600"></i>
                            Basic Information
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Customer Name</label>
                                <input type="text" id="dw_customerName" placeholder="Enter customer name"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Solar System Size (KW)
                                    *</label>
                                <input type="number" id="dw_systemSize" step="0.01" placeholder="e.g., 7"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Month</label>
                                <input type="text" id="dw_month" placeholder="e.g., July"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                <input type="date" id="dw_date"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                    </div>

                    <!-- Consumption Data -->
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-bolt text-green-600"></i>
                            Consumption & Charges
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Consumption Units *</label>
                                <input type="number" id="dw_consumptionUnits" step="0.01" placeholder="145"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                    required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Fuel Charges (₹)</label>
                                <input type="number" id="dw_fuelCharges" step="0.01" placeholder="0"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tax (₹)</label>
                                <input type="number" id="dw_tax" step="0.01" placeholder="76"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            </div>
                        </div>
                    </div>

                    <!-- Demand Charges -->
                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-charging-station text-yellow-600"></i>
                            Demand Charges
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Sanctioned Load (KW)
                                    *</label>
                                <input type="number" id="dw_sanctionedLoad" step="0.01" placeholder="7"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500"
                                    required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Rate per KW (₹) *</label>
                                <input type="number" id="dw_demandRate" step="0.01" placeholder="145"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500"
                                    required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Additional Charges
                                    (₹)</label>
                                <input type="number" id="dw_additionalCharges" step="0.01" placeholder="1015"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500">
                            </div>
                        </div>
                    </div>

                    <!-- Solar Production -->
                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-sun text-purple-600"></i>
                            Solar Production Details
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Units per Day (1kW
                                    generates) *</label>
                                <input type="number" id="dw_unitsPerDay" step="0.01" value="4" placeholder="4"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Average Consumption per Unit
                                    (₹) *</label>
                                <input type="number" id="dw_avgConsumptionRate" step="0.01" placeholder="5.80"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                    required>
                            </div>
                        </div>
                    </div>

                    <!-- PM SGY Subsidy Details -->
                    <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-hand-holding-usd text-orange-600"></i>
                            PM SGY Subsidy Details
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">With SGY - Rate per Unit
                                    (₹)</label>
                                <input type="number" id="dw_sgyWithRate" step="0.01" placeholder="3.86"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Without SGY - Rate per Unit
                                    (₹)</label>
                                <input type="number" id="dw_sgyWithoutRate" step="0.01" placeholder="3.86"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Exceed Unit Rate (₹)</label>
                                <input type="number" id="dw_exceedUnitRate" step="0.01" placeholder="695"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-end gap-3">
                        <button type="button" id="clear-worksheet-form"
                            class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition-colors">
                            <i class="fas fa-times mr-2"></i>Clear Form
                        </button>
                        <button type="button" id="generate-worksheet"
                            class="px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 transition-colors">
                            <i class="fas fa-file-pdf mr-2"></i>Generate Document
                        </button>
                    </div>
                </form>
            </div>

            <!-- Worksheet Preview -->
            <div id="worksheet-preview-section" class="bg-white rounded-lg shadow-md border border-gray-200 p-6 mt-6"
                style="display: none;">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-eye text-purple-600"></i>
                        Worksheet Preview
                    </h3>
                    <div class="flex gap-3">
                        <button id="print-worksheet-report"
                            class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 font-medium flex items-center gap-2">
                            <i class="fas fa-print"></i>
                            Print
                        </button>
                        <button id="save-worksheet-pdf"
                            class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-medium flex items-center gap-2">
                            <i class="fas fa-file-pdf"></i>
                            Save PDF
                        </button>
                    </div>
                </div>
                <div id="worksheet-preview-container"
                    class="border border-gray-200 rounded-lg overflow-hidden bg-gray-50">
                    <iframe id="worksheet-preview-frame" class="w-full"
                        style="min-height: 800px; border: none;"></iframe>
                </div>
            </div>
        </div>

    </main>

    <!-- Scripts -->
    <!-- Shared utilities -->
    <script src="../js/shared/globalScript.js"></script>
    <script src="../js/shared/utils.js"></script>
    <script src="../js/shared/calculations.js"></script>
    <script src="../js/shared/ipc.js"></script>
    <script src="../js/shared/documentManager.js"></script>

    <!-- Shared scripts -->
    <script src="../js/shared/companyConfig.js"></script>

    <!-- Module-specific scripts -->
    <script src="./reports.js"></script>
    <script src="./stockReport.js"></script>
    <script src="./gstReport.js"></script>
    <script src="./dataWorksheetReport.js"></script>
    <script src="./purchaseGstReport.js"></script>
</body>

</html>